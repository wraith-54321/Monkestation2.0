<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/token_manager - MonkeStation 2.0</title></head><body><header><a href="index.html">MonkeStation 2.0</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/token_manager.html#var">Var Details</a> - <a href="datum/controller/subsystem/token_manager.html#proc">Proc Details</a></header><main><h1>token_manager <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/token_manager.html">token_manager</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#var/accepted_count">accepted_count</a></th><td>Count of accepted tokens this round</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#var/pending_requests">pending_requests</a></th><td>List of all pending token requests - list of /datum/token_request</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#var/rejected_count">rejected_count</a></th><td>Count of rejected tokens this round</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#var/timed_out_count">timed_out_count</a></th><td>Count of timed out tokens this round</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/add_pending_request">add_pending_request</a></th><td>Adds the request to the subsystem</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/alert_admins_timeout_warning">alert_admins_timeout_warning</a></th><td>Alerts all admins that a token request is about to timeout (1 minute warning)</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/get_pending_requests_for_panel">get_pending_requests_for_panel</a></th><td>Pulls the info from the request</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/get_round_statistics">get_round_statistics</a></th><td>Compiles all round statistics into a list for TGUI. These stats are used to determine token acceptance, so is handy to have them all in the same place.</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/get_round_time">get_round_time</a></th><td>Gets the current round time as a formatted string</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/get_round_time_raw">get_round_time_raw</a></th><td>Gets the raw round time in deciseconds</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/record_accepted">record_accepted</a></th><td>Updates the accepted stat panel</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/record_rejected">record_rejected</a></th><td>Updates the rejected stat panel</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/record_timeout">record_timeout</a></th><td>Updates the timeout state panel</td></tr><tr><th><a href="datum/controller/subsystem/token_manager.html#proc/remove_pending_request">remove_pending_request</a></th><td>Removes the request from the subsystem</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/accepted_count"><aside class="declaration">var </aside>accepted_count <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L9"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 9"></a></h3><p>Count of accepted tokens this round</p><h3 id="var/pending_requests"><aside class="declaration">var </aside>pending_requests <aside>– /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L7"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 7"></a></h3><p>List of all pending token requests - list of /datum/token_request</p><h3 id="var/rejected_count"><aside class="declaration">var </aside>rejected_count <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 11"></a></h3><p>Count of rejected tokens this round</p><h3 id="var/timed_out_count"><aside class="declaration">var </aside>timed_out_count <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 13"></a></h3><p>Count of timed out tokens this round</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_pending_request"><aside class="declaration">proc </aside>add_pending_request<aside>(/<a href="datum.html">datum</a>/<a href="datum/token_request.html">token_request</a>/request)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L17"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 17"></a></aside></h3><p>Adds the request to the subsystem</p><h3 id="proc/alert_admins_timeout_warning"><aside class="declaration">proc </aside>alert_admins_timeout_warning<aside>(/<a href="datum.html">datum</a>/<a href="datum/token_request.html">token_request</a>/request)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L53"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 53"></a></aside></h3><p>Alerts all admins that a token request is about to timeout (1 minute warning)</p><h3 id="proc/get_pending_requests_for_panel"><aside class="declaration">proc </aside>get_pending_requests_for_panel<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L66"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 66"></a></aside></h3><p>Pulls the info from the request</p><h3 id="proc/get_round_statistics"><aside class="declaration">proc </aside>get_round_statistics<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L108"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 108"></a></aside></h3><p>Compiles all round statistics into a list for TGUI. These stats are used to determine token acceptance, so is handy to have them all in the same place.</p><h3 id="proc/get_round_time"><aside class="declaration">proc </aside>get_round_time<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L95"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 95"></a></aside></h3><p>Gets the current round time as a formatted string</p><h3 id="proc/get_round_time_raw"><aside class="declaration">proc </aside>get_round_time_raw<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L102"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 102"></a></aside></h3><p>Gets the raw round time in deciseconds</p><h3 id="proc/record_accepted"><aside class="declaration">proc </aside>record_accepted<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L27"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 27"></a></aside></h3><p>Updates the accepted stat panel</p><h3 id="proc/record_rejected"><aside class="declaration">proc </aside>record_rejected<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L32"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 32"></a></aside></h3><p>Updates the rejected stat panel</p><h3 id="proc/record_timeout"><aside class="declaration">proc </aside>record_timeout<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L37"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 37"></a></aside></h3><p>Updates the timeout state panel</p><h3 id="proc/remove_pending_request"><aside class="declaration">proc </aside>remove_pending_request<aside>(/<a href="datum.html">datum</a>/<a href="datum/token_request.html">token_request</a>/request)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e8578eb37f64beb024e8b82c982cba9918712316/code/controllers/subsystem/token_manager.dm#L22"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/token_manager.dm 22"></a></aside></h3><p>Removes the request from the subsystem</p></main><footer>tgstation.dme <a href="https://github.com/wraith-54321/Monkestation2.0/tree/e8578eb37f64beb024e8b82c982cba9918712316">e8578eb</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>