<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/job - MonkeStation 2.0</title></head><body><header><a href="index.html">MonkeStation 2.0</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="datum/controller/subsystem/job.html#var">Var Details</a> - <a href="datum/controller/subsystem/job.html#proc">Proc Details</a></header><main><h1>job <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/job.html">job</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/all_occupations">all_occupations</a></th><td>List of all jobs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/assignable_by_job">assignable_by_job</a></th><td>Nested assoc list of job types with values of lists of players who are viable for that job, keyed to what priority level that player has the job set to in their prefs</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/assigned_captain">assigned_captain</a></th><td>If TRUE, some player has been assigned Captaincy or Acting Captaincy at some point during the shift and has been given the spare ID safe code.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/assigned_players_by_job">assigned_players_by_job</a></th><td>Assoc list of new players keyed to the type of job they will currently get</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/chain_of_command">chain_of_command</a></th><td>Keys should be assigned job roles. Values should be &gt;= 1.
Represents the chain of command on the station. Lower numbers mean higher priority.
Used to give the Cap's Spare safe code to a an appropriate player.
Assumed Captain is always the highest in the chain of command.
See [/datum/controller/subsystem/ticker/proc/equip_characters]</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/config_documentation">config_documentation</a></th><td>This is just the message we prepen and put into all of the config files to ensure documentation. We use this in more than one place, so let's put it in the SS to make life a bit easier.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/dynamic_forced_occupations">dynamic_forced_occupations</a></th><td>Lazylist of mob:occupation_string pairs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/experience_jobs_map">experience_jobs_map</a></th><td>Dictionary of jobs indexed by the experience type they grant.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/holiday_restricted">holiday_restricted</a></th><td>List jobs failing the holiday check on enabled holiday jobs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/job_priorities_to_strings">job_priorities_to_strings</a></th><td>Dictionary that maps job priorities to low/medium/high. Keys have to be number-strings as assoc lists cannot be indexed by integers. Set in setup_job_lists.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/joinable_departments">joinable_departments</a></th><td>List of all departments with joinable jobs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/joinable_departments_by_type">joinable_departments_by_type</a></th><td>List of all joinable departments indexed by their typepath, sorted by their own display order.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/joinable_occupations">joinable_occupations</a></th><td>List of jobs that can be joined through the starting menu.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/legacy_mode">legacy_mode</a></th><td>Are we using the old job config system (txt) or the new job config system (TOML)? IF we are going to use the txt file, then we are in &quot;legacy mode&quot;, and this will flip to TRUE.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/name_occupations">name_occupations</a></th><td>Dictionary of all jobs, keys are titles.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/safe_code_request_loc">safe_code_request_loc</a></th><td>The loc to which the emergency safe code has been requested for delivery.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/safe_code_requested">safe_code_requested</a></th><td>Whether the emergency safe code has been requested via a comms console on shifts with no Captain or Acting Captain.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/safe_code_timer_id">safe_code_timer_id</a></th><td>Timer ID for the emergency safe code request.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/type_occupations">type_occupations</a></th><td>Dictionary of all jobs, keys are types.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/AssignRole">AssignRole</a></th><td>Assigns the given job role to the player.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/CheckHeadPositions">CheckHeadPositions</a></th><td>Attempts to fill out all possible head positions for players with that job at a a given job priority level.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/DivideOccupations">DivideOccupations</a></th><td></td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/DropLandAtRandomHallwayPoint">DropLandAtRandomHallwayPoint</a></th><td>Lands specified mob at a random spot in the hallways</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/FillHeadPosition">FillHeadPosition</a></th><td>Will try to select a head, ignoring ALL non-head preferences for every level until.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/FreeRole">FreeRole</a></th><td>trys to free up a job slot via the rank</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/assign_priority_positions">assign_priority_positions</a></th><td>Blindly assigns the required roles to every player in the dynamic_forced_occupations list.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/check_job_eligibility">check_job_eligibility</a></th><td>Runs a standard suite of eligibility checks to make sure the player can take the reqeusted job.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/export_toml">export_toml</a></th><td>Proc that we call to generate a new jobconfig.toml file and send it to the requesting client. Returns TRUE if a file is successfully generated.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/fill_ai_positions">fill_ai_positions</a></th><td>Attempts to fill out all available AI positions.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/generate_config">generate_config</a></th><td>Called from an admin debug verb that generates the jobconfig.toml file and then allows the end user to download it to their machine. Returns TRUE if a file is successfully generated, FALSE otherwise.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_all_heads">get_all_heads</a></th><td>Returns a list of minds of all heads of staff</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_all_sec">get_all_sec</a></th><td>Returns a list of minds of all security members</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_living_heads">get_living_heads</a></th><td>Returns a list of minds of all heads of staff who are alive</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_living_sec">get_living_sec</a></th><td>Returns a list of minds of all security members who are alive</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/handle_final_setup">handle_final_setup</a></th><td>Handle antags as well as assigning people to their jobs</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/handle_temp_assignments">handle_temp_assignments</a></th><td>Handle all the stuff for temp assignments at round start job selection</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/has_minimum_jobs">has_minimum_jobs</a></th><td>Check if the station manifest has at least a certain amount of this staff type.
If a matching head of staff is on the manifest, automatically passes (returns TRUE)</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/is_skeleton_engineering">is_skeleton_engineering</a></th><td>Check if the station manifest has at least a certain amount of this staff type</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/job_priority_level_to_string">job_priority_level_to_string</a></th><td>Takes a job priority #define such as JP_LOW and gets its string representation for logging.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/load_jobs_from_config">load_jobs_from_config</a></th><td>Called in jobs subsystem initialize if LOAD_JOBS_FROM_TXT config flag is set: reads jobconfig.toml (or if in legacy mode, jobs.txt) to set all of the datum's values to what the server operator wants.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/pick_desired_roundstart">pick_desired_roundstart</a></th><td>Attempt to pick a roundstart ruleset to be our desired ruleset</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/regenerate_job_config">regenerate_job_config</a></th><td>If we add a new job or more fields to config a job with, quickly spin up a brand new config that inherits all of your old settings, but adds the new job with codebase defaults. Returns TRUE if a file is successfully generated, FALSE otherwise.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/send_spare_id_safe_code">send_spare_id_safe_code</a></th><td>Send a drop pod containing a piece of paper with the spare ID safe code to loc</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/setup_alt_job_items">setup_alt_job_items</a></th><td>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/setup_job_lists">setup_job_lists</a></th><td>Builds various lists of jobs based on station, centcom and additional jobs with icons associated with them.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/try_reassign_job">try_reassign_job</a></th><td>Try and reassign the job of input player and return based on if we succeed or not, if need_new_enemy is passed then we will return FALSE if we cant find someone else to be an enemy</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/all_occupations"><aside class="declaration">var </aside>all_occupations <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L7"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 7"></a></h3><p>List of all jobs.</p><h3 id="var/assignable_by_job"><aside class="declaration">var </aside>assignable_by_job <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L5"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 5"></a></h3><p>Nested assoc list of job types with values of lists of players who are viable for that job, keyed to what priority level that player has the job set to in their prefs</p><h3 id="var/assigned_captain"><aside class="declaration">var </aside>assigned_captain <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L58"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 58"></a></h3><p>If TRUE, some player has been assigned Captaincy or Acting Captaincy at some point during the shift and has been given the spare ID safe code.</p><h3 id="var/assigned_players_by_job"><aside class="declaration">var </aside>assigned_players_by_job <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L3"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 3"></a></h3><p>Assoc list of new players keyed to the type of job they will currently get</p><h3 id="var/chain_of_command"><aside class="declaration">var </aside>chain_of_command <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L47"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 47"></a></h3><p>Keys should be assigned job roles. Values should be &gt;= 1.
Represents the chain of command on the station. Lower numbers mean higher priority.
Used to give the Cap's Spare safe code to a an appropriate player.
Assumed Captain is always the highest in the chain of command.
See [/datum/controller/subsystem/ticker/proc/equip_characters]</p><h3 id="var/config_documentation"><aside class="declaration">var </aside>config_documentation <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L73"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 73"></a></h3><p>This is just the message we prepen and put into all of the config files to ensure documentation. We use this in more than one place, so let's put it in the SS to make life a bit easier.</p><h3 id="var/dynamic_forced_occupations"><aside class="declaration">var </aside>dynamic_forced_occupations <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L36"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 36"></a></h3><p>Lazylist of mob:occupation_string pairs.</p><h3 id="var/experience_jobs_map"><aside class="declaration">var </aside>experience_jobs_map <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L18"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 18"></a></h3><p>Dictionary of jobs indexed by the experience type they grant.</p><h3 id="var/holiday_restricted"><aside class="declaration">var </aside>holiday_restricted <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 15"></a></h3><p>List jobs failing the holiday check on enabled holiday jobs.</p><h3 id="var/job_priorities_to_strings"><aside class="declaration">var </aside>job_priorities_to_strings <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L67"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 67"></a></h3><p>Dictionary that maps job priorities to low/medium/high. Keys have to be number-strings as assoc lists cannot be indexed by integers. Set in setup_job_lists.</p><h3 id="var/joinable_departments"><aside class="declaration">var </aside>joinable_departments <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/job_department.html">job_department</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L21"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 21"></a></h3><p>List of all departments with joinable jobs.</p><h3 id="var/joinable_departments_by_type"><aside class="declaration">var </aside>joinable_departments_by_type <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/job_department.html">job_department</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L23"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 23"></a></h3><p>List of all joinable departments indexed by their typepath, sorted by their own display order.</p><h3 id="var/joinable_occupations"><aside class="declaration">var </aside>joinable_occupations <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L9"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 9"></a></h3><p>List of jobs that can be joined through the starting menu.</p><h3 id="var/legacy_mode"><aside class="declaration">var </aside>legacy_mode <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L70"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 70"></a></h3><p>Are we using the old job config system (txt) or the new job config system (TOML)? IF we are going to use the txt file, then we are in &quot;legacy mode&quot;, and this will flip to TRUE.</p><h3 id="var/name_occupations"><aside class="declaration">var </aside>name_occupations <aside>â€“ /list</aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 11"></a></h3><p>Dictionary of all jobs, keys are titles.</p><h3 id="var/safe_code_request_loc"><aside class="declaration">var </aside>safe_code_request_loc <aside>â€“ /<a href="turf.html">turf</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L64"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 64"></a></h3><p>The loc to which the emergency safe code has been requested for delivery.</p><h3 id="var/safe_code_requested"><aside class="declaration">var </aside>safe_code_requested <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L60"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 60"></a></h3><p>Whether the emergency safe code has been requested via a comms console on shifts with no Captain or Acting Captain.</p><h3 id="var/safe_code_timer_id"><aside class="declaration">var </aside>safe_code_timer_id <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L62"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 62"></a></h3><p>Timer ID for the emergency safe code request.</p><h3 id="var/type_occupations"><aside class="declaration">var </aside>type_occupations <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 13"></a></h3><p>Dictionary of all jobs, keys are types.</p><h2 id="proc">Proc Details</h2><h3 id="proc/AssignRole"><aside class="declaration">proc </aside>AssignRole<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a>/player, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/job, latejoin, do_eligibility_checks)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L224"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 224"></a></aside></h3><p>Assigns the given job role to the player.</p>
<p>Arguments:</p>
<ul>
<li>player - The player to assign the job to</li>
<li>job - The job to assign</li>
<li>latejoin - Set to TRUE if this is a latejoin role assignment.</li>
<li>do_eligibility_checks - Set to TRUE to conduct all job eligibility tests and reject on failure. Set to FALSE if job eligibility has been tested elsewhere and they can be safely skipped.</li>
</ul><h3 id="proc/CheckHeadPositions"><aside class="declaration">proc </aside>CheckHeadPositions<aside>(level)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L361"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 361"></a></aside></h3><p>Attempts to fill out all possible head positions for players with that job at a a given job priority level.</p>
<p>Arguments:</p>
<ul>
<li>level - One of the JP_LOW, JP_MEDIUM or JP_HIGH defines. Attempts to find candidates with head jobs at this priority only.</li>
</ul><h3 id="proc/DivideOccupations"><aside class="declaration">proc </aside>DivideOccupations<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L403"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 403"></a></aside></h3><ul>
<li>Proc DivideOccupations</li>
<li>fills var &quot;assigned_role&quot; for all ready players.</li>
<li>This proc must not have any side effect besides of modifying &quot;assigned_role&quot;.</li>
</ul><h3 id="proc/DropLandAtRandomHallwayPoint"><aside class="declaration">proc </aside>DropLandAtRandomHallwayPoint<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/living_mob)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L986"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 986"></a></aside></h3><p>Lands specified mob at a random spot in the hallways</p><h3 id="proc/FillHeadPosition"><aside class="declaration">proc </aside>FillHeadPosition<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L331"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 331"></a></aside></h3><p>Will try to select a head, ignoring ALL non-head preferences for every level until.</p>
<p>Basically tries to ensure there is at least one head in every shift if anyone has that job preference enabled at all.</p><h3 id="proc/FreeRole"><aside class="declaration">proc </aside>FreeRole<aside>(rank)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L220"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 220"></a></aside></h3><p>trys to free up a job slot via the rank</p><h3 id="proc/assign_priority_positions"><aside class="declaration">proc </aside>assign_priority_positions<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1096"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1096"></a></aside></h3><p>Blindly assigns the required roles to every player in the dynamic_forced_occupations list.</p><h3 id="proc/check_job_eligibility"><aside class="declaration">proc </aside>check_job_eligibility<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a>/player, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/possible_job, debug_prefix, add_job_to_log)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1121"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1121"></a></aside></h3><p>Runs a standard suite of eligibility checks to make sure the player can take the reqeusted job.</p>
<p>Checks:</p>
<ul>
<li>Role bans</li>
<li>How many days old the player account is</li>
<li>Whether the player has the required hours in other jobs to take that role</li>
<li>If the job is in the mind's restricted roles, for example if they have an antag datum that's incompatible with certain roles.</li>
</ul>
<p>Arguments:</p>
<ul>
<li>player - The player to check for job eligibility.</li>
<li>possible_job - The job to check for eligibility against.</li>
<li>debug_prefix - Logging prefix for the JobDebug log entries. For example, GRJ during GiveRandomJob or DO during DivideOccupations.</li>
<li>add_job_to_log - If TRUE, appends the job type to the log entry. If FALSE, does not. Set to FALSE when check is part of iterating over players for a specific job, set to TRUE when check is part of iterating over jobs for a specific player and you don't want extra log entry spam.</li>
</ul><h3 id="proc/export_toml"><aside class="declaration">proc </aside>export_toml<aside>(/<a href="mob.html">mob</a>/user, data)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L837"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 837"></a></aside></h3><p>Proc that we call to generate a new jobconfig.toml file and send it to the requesting client. Returns TRUE if a file is successfully generated.</p><h3 id="proc/fill_ai_positions"><aside class="declaration">proc </aside>fill_ai_positions<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L377"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 377"></a></aside></h3><p>Attempts to fill out all available AI positions.</p><h3 id="proc/generate_config"><aside class="declaration">proc </aside>generate_config<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L700"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 700"></a></aside></h3><p>Called from an admin debug verb that generates the jobconfig.toml file and then allows the end user to download it to their machine. Returns TRUE if a file is successfully generated, FALSE otherwise.</p><h3 id="proc/get_all_heads"><aside class="declaration">proc </aside>get_all_heads<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1007"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1007"></a></aside></h3><p>Returns a list of minds of all heads of staff</p><h3 id="proc/get_all_sec"><aside class="declaration">proc </aside>get_all_sec<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1024"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1024"></a></aside></h3><p>Returns a list of minds of all security members</p><h3 id="proc/get_living_heads"><aside class="declaration">proc </aside>get_living_heads<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L997"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 997"></a></aside></h3><p>Returns a list of minds of all heads of staff who are alive</p><h3 id="proc/get_living_sec"><aside class="declaration">proc </aside>get_living_sec<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1014"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1014"></a></aside></h3><p>Returns a list of minds of all security members who are alive</p><h3 id="proc/handle_final_setup"><aside class="declaration">proc </aside>handle_final_setup<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L27"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 27"></a></aside></h3><p>Handle antags as well as assigning people to their jobs</p><h3 id="proc/handle_temp_assignments"><aside class="declaration">proc </aside>handle_temp_assignments<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a>/player, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/job)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L8"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 8"></a></aside></h3><p>Handle all the stuff for temp assignments at round start job selection</p><h3 id="proc/has_minimum_jobs"><aside class="declaration">proc </aside>has_minimum_jobs<aside>(crew_threshold, /list/jobs, /list/head_jobs)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1181"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1181"></a></aside></h3><p>Check if the station manifest has at least a certain amount of this staff type.
If a matching head of staff is on the manifest, automatically passes (returns TRUE)</p>
<p>Arguments:</p>
<ul>
<li>crew_threshold - amount of crew to meet the requirement</li>
<li>jobs - a list of jobs that qualify the requirement</li>
<li>head_jobs - a list of head jobs that qualify the requirement</li>
</ul><h3 id="proc/is_skeleton_engineering"><aside class="declaration">proc </aside>is_skeleton_engineering<aside>(crew_threshold)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/modules/blueshift/structures/delam_procedure.dm#L544"><img src="git.png" width="16" height="16" title="monkestation/code/modules/blueshift/structures/delam_procedure.dm 544"></a></aside></h3><p>Check if the station manifest has at least a certain amount of this staff type</p>
<p>Arguments:</p>
<ul>
<li>crew_threshold - amount of crew before it's no longer considered a skeleton crew</li>
</ul><h3 id="proc/job_priority_level_to_string"><aside class="declaration">proc </aside>job_priority_level_to_string<aside>(priority)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1103"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1103"></a></aside></h3><p>Takes a job priority #define such as JP_LOW and gets its string representation for logging.</p><h3 id="proc/load_jobs_from_config"><aside class="declaration">proc </aside>load_jobs_from_config<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L657"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 657"></a></aside></h3><p>Called in jobs subsystem initialize if LOAD_JOBS_FROM_TXT config flag is set: reads jobconfig.toml (or if in legacy mode, jobs.txt) to set all of the datum's values to what the server operator wants.</p><h3 id="proc/pick_desired_roundstart"><aside class="declaration">proc </aside>pick_desired_roundstart<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L180"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 180"></a></aside></h3><p>Attempt to pick a roundstart ruleset to be our desired ruleset</p><h3 id="proc/regenerate_job_config"><aside class="declaration">proc </aside>regenerate_job_config<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L763"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 763"></a></aside></h3><p>If we add a new job or more fields to config a job with, quickly spin up a brand new config that inherits all of your old settings, but adds the new job with codebase defaults. Returns TRUE if a file is successfully generated, FALSE otherwise.</p><h3 id="proc/send_spare_id_safe_code"><aside class="declaration">proc </aside>send_spare_id_safe_code<aside>(loc)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1090"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1090"></a></aside></h3><p>Send a drop pod containing a piece of paper with the spare ID safe code to loc</p><h3 id="proc/setup_alt_job_items"><aside class="declaration">proc </aside>setup_alt_job_items<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/equipping, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/job, /<a href="client.html">client</a>/player_client)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/modules/client/preferences/alt_jobs/_job.dm#L10"><img src="git.png" width="16" height="16" title="monkestation/code/modules/client/preferences/alt_jobs/_job.dm 10"></a></aside></h3><p>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</p>
<p>All extra functionality to run on new player mobs, in a place where we actually have the client,
and haven't called COMSIG_GLOB_JOB_AFTER_SPAWN yet, so we are running before the wallet trait,
and other things that rely on items already being settled.</p><h3 id="proc/setup_job_lists"><aside class="declaration">proc </aside>setup_job_lists<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/controllers/subsystem/job.dm#L1034"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1034"></a></aside></h3><p>Builds various lists of jobs based on station, centcom and additional jobs with icons associated with them.</p><h3 id="proc/try_reassign_job"><aside class="declaration">proc </aside>try_reassign_job<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a>/player, /list/enemy_jobs, /list/restricted_jobs, need_new_enemy, /list/enemy_players)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/monkestation/code/controllers/subsystem/job.dm#L150"><img src="git.png" width="16" height="16" title="monkestation/code/controllers/subsystem/job.dm 150"></a></aside></h3><p>Try and reassign the job of input player and return based on if we succeed or not, if need_new_enemy is passed then we will return FALSE if we cant find someone else to be an enemy</p></main><footer>tgstation.dme <a href="https://github.com/wraith-54321/Monkestation2.0/tree/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2">e87cd58</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>