<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/stackable - MonkeStation 2.0</title></head><body><header><a href="index.html">MonkeStation 2.0</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/stackable.html#var">Var Details</a> - <a href="datum/component/stackable.html#proc">Proc Details</a></header><main><h1>stackable <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/stackable.html">stackable</a></aside> <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L2"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 2"></a></h1><p>A component that allows an item to with stackable(pretty much just a simlfied version of the behavior from /obj/item/stack)</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/stackable.html#var/amount">amount</a></th><td>How much is in this stack?</td></tr><tr><th><a href="datum/component/stackable.html#var/full_w_class">full_w_class</a></th><td>The weight class the stack has at amount &gt; 2/3rds max_amount</td></tr><tr><th><a href="datum/component/stackable.html#var/max_amount">max_amount</a></th><td>How much is allowed in this stack?</td></tr><tr><th><a href="datum/component/stackable.html#var/merge_type">merge_type</a></th><td>This path and its children should merge with this stack, defaults to parent.type</td></tr><tr><th><a href="datum/component/stackable.html#var/novariants">novariants</a></th><td>Determines whether the item should update it's sprites based on amount.</td></tr><tr><th><a href="datum/component/stackable.html#var/singular_name">singular_name</a></th><td>What's the name of just 1 of this stack. You have a stack of leather, but one piece of leather</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/stackable.html#proc/Initialize">Initialize</a></th><td>_singular_name - What's the name of just 1 of this stack. You have a stack of leather, but one piece of leather
starting_amount - How many does this stack start within itself
_max_amount - How much is allowed in this stack?
_merge_type - This path and its children should merge with this stack, defaults to parent.type
_full_w_class - The weight class the stack has at amount &gt; 2/3rds max_amount
_novariants - Determines whether the item should update it's sprites based on amount.</td></tr><tr><th><a href="datum/component/stackable.html#proc/add">add</a></th><td></td></tr><tr><th><a href="datum/component/stackable.html#proc/can_merge">can_merge</a></th><td></td></tr><tr><th><a href="datum/component/stackable.html#proc/is_zero_amount">is_zero_amount</a></th><td>Returns TRUE if the item stack is the equivalent of a 0 amount item.</td></tr><tr><th><a href="datum/component/stackable.html#proc/merge">merge</a></th><td>Merges as much of src into target_stack as possible. If present, the limit arg overrides target_stack.max_amount for transfer.</td></tr><tr><th><a href="datum/component/stackable.html#proc/merge_with_loc">merge_with_loc</a></th><td>Tries to merge the stack with everything on the same tile.</td></tr><tr><th><a href="datum/component/stackable.html#proc/merge_without_del">merge_without_del</a></th><td>Merges as much of parent into target_stack as possible. If present, the limit arg overrides target_stack.max_amount for transfer.</td></tr><tr><th><a href="datum/component/stackable.html#proc/on_moved">on_moved</a></th><td>Called when our parent is moved</td></tr><tr><th><a href="datum/component/stackable.html#proc/split_stack">split_stack</a></th><td></td></tr><tr><th><a href="datum/component/stackable.html#proc/update_parent">update_parent</a></th><td>Call update_weight() and update_appearance() on our parent</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/amount"><aside class="declaration">var </aside>amount <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L6"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 6"></a></h3><p>How much is in this stack?</p><h3 id="var/full_w_class"><aside class="declaration">var </aside>full_w_class <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 12"></a></h3><p>The weight class the stack has at amount &gt; 2/3rds max_amount</p><h3 id="var/max_amount"><aside class="declaration">var </aside>max_amount <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 8"></a></h3><p>How much is allowed in this stack?</p><h3 id="var/merge_type"><aside class="declaration">var </aside>merge_type <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L10"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 10"></a></h3><p>This path and its children should merge with this stack, defaults to parent.type</p><h3 id="var/novariants"><aside class="declaration">var </aside>novariants <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 14"></a></h3><p>Determines whether the item should update it's sprites based on amount.</p><h3 id="var/singular_name"><aside class="declaration">var </aside>singular_name <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L4"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 4"></a></h3><p>What's the name of just 1 of this stack. You have a stack of leather, but one piece of leather</p><h2 id="proc">Proc Details</h2><h3 id="proc/Initialize"><aside class="parent"><a title="/datum/component" href="datum/component.html#proc/Initialize">↑</a></aside>Initialize<aside>(_singular_name, starting_amount, _max_amount, _merge_type, _full_w_class, _novariants, merge)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 24"></a></aside></h3><p>_singular_name - What's the name of just 1 of this stack. You have a stack of leather, but one piece of leather
starting_amount - How many does this stack start within itself
_max_amount - How much is allowed in this stack?
_merge_type - This path and its children should merge with this stack, defaults to parent.type
_full_w_class - The weight class the stack has at amount &gt; 2/3rds max_amount
_novariants - Determines whether the item should update it's sprites based on amount.</p><h3 id="proc/add"><aside class="declaration">proc </aside>add<aside>(_amount)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L205"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 205"></a></aside></h3><ul>
<li>
<p>Adds some number of units to this stack.</p>
</li>
<li>
<p>Arguments:</p>
</li>
<li>
<ul>
<li>_amount: The number of units to add to this stack.</li>
</ul>
</li>
</ul><h3 id="proc/can_merge"><aside class="declaration">proc </aside>can_merge<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/check, inhand, checked_type)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L216"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 216"></a></aside></h3><ul>
<li>
<p>Checks whether this stack can merge itself into another stack, will return the stackable component of checked if able to</p>
</li>
<li>
<p>Arguments:</p>
</li>
<li>
<ul>
<li><a href="obj/item.html" title="/obj/item">check</a>: The item to check for mergeability.</li>
</ul>
</li>
<li>
<ul>
<li>[inhand][boolean]: Whether or not the stack to check should act like it's in a mob's hand.</li>
</ul>
</li>
<li>
<ul>
<li>[checked_type][bool]: Has the istype() check already been run</li>
</ul>
</li>
</ul><h3 id="proc/is_zero_amount"><aside class="declaration">proc </aside>is_zero_amount<aside>(delete_if_zero)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L193"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 193"></a></aside></h3><p>Returns TRUE if the item stack is the equivalent of a 0 amount item.</p>
<p>Also deletes the item if delete_if_zero is TRUE and the stack does not have
is_cyborg set to true.</p><h3 id="proc/merge"><aside class="declaration">proc </aside>merge<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/target_stack, limit, /<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/stackable.html">stackable</a>/passed_component)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L264"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 264"></a></aside></h3><p>Merges as much of src into target_stack as possible. If present, the limit arg overrides target_stack.max_amount for transfer.</p>
<p>This proc deletes src if the remaining amount after the transfer is 0.</p><h3 id="proc/merge_with_loc"><aside class="declaration">proc </aside>merge_with_loc<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L94"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 94"></a></aside></h3><p>Tries to merge the stack with everything on the same tile.</p><h3 id="proc/merge_without_del"><aside class="declaration">proc </aside>merge_without_del<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/target_stack, limit, /<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/stackable.html">stackable</a>/target_component)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L237"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 237"></a></aside></h3><p>Merges as much of parent into target_stack as possible. If present, the limit arg overrides target_stack.max_amount for transfer.</p>
<p>This calls on_use() without check = FALSE, preventing the item from qdeling itself if it reaches 0 stack size.</p>
<p>As a result, this proc can leave behind a 0 amount stack.</p><h3 id="proc/on_moved"><aside class="declaration">proc </aside>on_moved<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/moved, /<a href="atom.html">atom</a>/old_loc, movement_dir, forced)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L67"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 67"></a></aside></h3><p>Called when our parent is moved</p><h3 id="proc/split_stack"><aside class="declaration">proc </aside>split_stack<aside>(/<a href="mob.html">mob</a>/user, split_amount)  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L304"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 304"></a></aside></h3><ul>
<li>
<p>Splits the stack into two stacks.</p>
</li>
<li>
<p>Arguments:</p>
</li>
<li>
<ul>
<li><a href="mob.html" title="/mob">user</a>: The mob splitting the stack.</li>
</ul>
</li>
<li>
<ul>
<li>split_amount: The number of units to split from this stack.</li>
</ul>
</li>
</ul><h3 id="proc/update_parent"><aside class="declaration">proc </aside>update_parent<aside>()  <a href="https://github.com/wraith-54321/Monkestation2.0/blob/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2/code/datums/components/stackable.dm#L61"><img src="git.png" width="16" height="16" title="code/datums/components/stackable.dm 61"></a></aside></h3><p>Call update_weight() and update_appearance() on our parent</p></main><footer>tgstation.dme <a href="https://github.com/wraith-54321/Monkestation2.0/tree/e87cd5865da73e1fc78dbf3ac640d3e7369d7fa2">e87cd58</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>